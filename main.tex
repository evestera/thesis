\documentclass[12pt,a4paper,english,twoside,openright]{report}
\usepackage{parskip}

%\usepackage[left=2.5cm,right=2.5cm,top=2cm]{geometry}
\usepackage[includeheadfoot, inner=3.5cm, outer=3.5cm]{geometry}
\setlength{\headheight}{15pt}

\usepackage{emptypage}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\renewcommand{\sectionmark}[1]{ \markright{\thesection\ #1}{} }
\fancyhead[RE,LO]{\rightmark}
%\fancyfoot[CE,CO]{\thepage}
%\fancyfoot[LE,RO]{\thepage}

\input{fonts.tex}

\usepackage{float}
\floatstyle{boxed}
\restylefloat{figure}

\usepackage{amsfonts}
\usepackage{amsmath}

\DeclareMathOperator{\shap}{vts}
\DeclareMathOperator{\cfs}{cfs}
\DeclareMathOperator{\fold}{fold}
\DeclareMathOperator{\csh}{csh}
\DeclareMathOperator{\opt}{opt}

\usepackage{tikz}
\usetikzlibrary{graphs}
\usetikzlibrary{graphdrawing}
\usetikzlibrary{arrows, automata}
\usegdlibrary{layered}


% Double brackets and braces for shapes:
% \vect{ expr }
% \recd{ expr }

\usepackage{stmaryrd}

\newcommand\vect[1]{\llbracket #1 \rrbracket}

\usepackage{xparse}

% Based on:
% https://tex.stackexchange.com/questions/252648/left-right-double-curly-brace-blackboard-bold-symbol
\NewDocumentCommand{\recd}{sO{}m}{%
  \IfBooleanTF{#1}
    {\recdext{#3}}
    {\recdx[#2]{#3}}%
}

\NewDocumentCommand{\recdext}{m}{%
  \sbox0{%
    \mathsurround=0pt % just for safety
    $\left\{\vphantom{#1}\right.\kern-\nulldelimiterspace$%
  }%
  \sbox2{\{}%
  \left\{\kern-.7\wd0\left\{#1\right\}\kern-.7\wd0\right\}%
}

\NewDocumentCommand{\recdx}{om}{%
  \sbox0{\mathsurround=0pt$#1\{$}%
  \sbox2{\{}%
    \mathopen{#1\{\kern-.7\wd0 #1\{}
    #2
    \mathclose{#1\}\kern-.7\wd0 #1\}}
}


\usepackage{minted}
\newmintinline[ir]{rust}{}
\newmintedfile[rustfile]{rust}{}
% \rustfile[firstline=2,lastline=7,gobble=4]{rustcode/examples/references.rs}

\usepackage{color}
\definecolor{mygreen}{RGB}{0, 100, 0}
\definecolor{mygray}{RGB}{245, 245, 245}

\usepackage{enumerate}
\usepackage{multicol}
\usepackage{dirtytalk}
\usepackage{pdfpages}

\newcommand\icode[1]{\texttt{\textbf{#1}}}

\newcommand\morestuff{\textcolor{red}{ More stuff here... }}
\newcommand\placeholder[1]{\textcolor{red}{Placeholder: #1}}

\catcode`\‹ =\active
\def‹#1›{\texttt{\textbf{\detokenize{#1}}}}

\catcode`\« =\active
\def«#1»{\emph{\detokenize{#1}}}
\def\fsharpdata{\emph{F\# Data}}

\title{Rust types from JSON samples}
%\subtitle{A macro based approach to type providers in Rust}
\author{Erik Vesteraas}
\date{}

\usepackage[
  pdftitle={Rust types from JSON samples},
  pdfauthor={Erik Vesteraas},
  unicode=true,
  colorlinks=true,
  linkcolor=black,
  urlcolor=mygreen,
  citecolor=mygreen
]{hyperref}
\urlstyle{same}

\usepackage[
  backend=biber,
  %style=authoryear,
  maxbibnames=6,
  isbn=false,
  %url=false,
  doi=false,
  defernumbers=true
]{biblatex}
\addbibresource{refs.bib}
\setlength\bibitemsep{\baselineskip}

\begin{document}

\pagenumbering{roman}
\includepdf[pages={-}]{forside.pdf}
\setcounter{page}{5}

\tableofcontents

\listoflistings
\listoffigures

\cleardoublepage

\input{chapters/preface.tex}

\cleardoublepage

\pagenumbering{arabic}

\input{chapters/introduction.tex}
\input{chapters/project-presentation.tex}
\input{chapters/code-generation.tex}
\input{chapters/future-work.tex}

\nocite{serde}
\nocite{serdejson}
\nocite{frunk}
\nocite{fsharpdata}

\printbibheading
\printbibliography[keyword=software, heading=subbibliography, title={Referenced software projects}]
\printbibliography[notkeyword=software, heading=subbibliography, title={Other references}]

\end{document}
